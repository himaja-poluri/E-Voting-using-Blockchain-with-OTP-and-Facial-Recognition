{"ast":null,"code":"var _jsxFileName = \"E:\\\\Teja\\\\College\\\\sem8\\\\final-year-project\\\\src\\\\App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport MyApp from \"./Containers/MyApp\";\nimport Home from \"./Containers/Home\";\nimport Admin from \"./Containers/Admin\";\nimport User from \"./Containers/User\";\nimport NewCandidate from \"./Containers/NewCandidate\";\nimport Election from \"./build/Election.json\";\nimport Web3 from 'web3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass App extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {};\n  }\n  async componentWillMount() {\n    await this.loadWeb3();\n    await this.loadBlockchainData();\n  }\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n  async loadBlockchainData() {\n    const web3 = window.web3;\n    const accounts = await web3.eth.getAccounts();\n    console.log(accounts);\n    this.setState({\n      account: accounts[0]\n    });\n    const networkId = await web3.eth.net.getId();\n    const networkData = Election.networks[networkId];\n    if (networkData) {\n      const election = new web3.eth.Contract(Election.abi, networkData.address);\n      this.setState({\n        election\n      });\n      console.log(election);\n      const candCount = await election.methods.candidatesCount().call();\n      this.setState({\n        candCount\n      });\n      console.log(candCount);\n      for (var i = 1; i <= candCount; i++) {\n        const candidates = await election.methods.candidates(i).call();\n        if (candidates.election_id === this.state.id) {\n          this.setState({\n            candidates: [...this.state.candidates, candidates]\n          });\n        }\n      }\n      console.log(this.state.candidates);\n    } else {\n      window.alert('Election contract not deployed to detected network.');\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/user\",\n          element: /*#__PURE__*/_jsxDEV(User, {\n            candidatesDetails: this.state.candidatesDetails\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/admin\",\n          element: /*#__PURE__*/_jsxDEV(Admin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/admin/addcandidate\",\n          element: /*#__PURE__*/_jsxDEV(NewCandidate, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","BrowserRouter","Routes","Route","MyApp","Home","Admin","User","NewCandidate","Election","Web3","jsxDEV","_jsxDEV","App","constructor","arguments","state","componentWillMount","loadWeb3","loadBlockchainData","window","ethereum","web3","enable","currentProvider","alert","accounts","eth","getAccounts","console","log","setState","account","networkId","net","getId","networkData","networks","election","Contract","abi","address","candCount","methods","candidatesCount","call","i","candidates","election_id","id","render","children","exact","path","element","fileName","_jsxFileName","lineNumber","columnNumber","candidatesDetails"],"sources":["E:/Teja/College/sem8/final-year-project/src/App.js"],"sourcesContent":["import './App.css'; \nimport React, { Component } from 'react';\nimport {BrowserRouter,Routes,Route} from \"react-router-dom\"\nimport MyApp from \"./Containers/MyApp\"\nimport Home  from \"./Containers/Home\"\nimport Admin  from \"./Containers/Admin\"\nimport User  from \"./Containers/User\"\nimport NewCandidate from \"./Containers/NewCandidate\"\nimport Election from \"./build/Election.json\"\nimport Web3 from 'web3';\n\nclass App extends React.Component {\n\n  state={\n\n  }\n\n  async componentWillMount() {\n    await this.loadWeb3()\n    await this.loadBlockchainData()\n  }\n\nasync loadWeb3() {\n    if (window.ethereum) {\n        window.web3 = new Web3(window.ethereum)\n        await window.ethereum.enable()\n    }\n    else if (window.web3) {\n        window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n        window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n    }\n}\n\nasync loadBlockchainData() {\n    const web3 = window.web3\n    const accounts = await web3.eth.getAccounts()\n    console.log(accounts)\n    this.setState({ account: accounts[0] })\n    const networkId = await web3.eth.net.getId()\n    const networkData = Election.networks[networkId]\n    if(networkData) {\n        const election = new web3.eth.Contract(Election.abi, networkData.address)\n        this.setState({ election })\n        console.log(election)\n        const candCount = await election.methods.candidatesCount().call()\n        this.setState({ candCount })\n        console.log(candCount)\n        for (var i = 1; i <= candCount; i++) {\n            const candidates = await election.methods.candidates(i).call()\n            if(candidates.election_id === this.state.id){\n                this.setState({\n                    candidates: [...this.state.candidates, candidates]\n                })\n            }\n        }\n        console.log(this.state.candidates)\n    } else {\n        window.alert('Election contract not deployed to detected network.')\n    }\n}\n  render(){\n    return (\n      <BrowserRouter>\n        <Routes>\n            <Route exact path=\"/\" element={<Home/>}/>\n            <Route exact path=\"/user\" element={<User candidatesDetails={this.state.candidatesDetails}/>}/>\n            <Route exact path=\"/admin\" element={<Admin/>}/>\n            <Route exact path=\"/admin/addcandidate\" element={<NewCandidate/>}/>\n        </Routes>\n      </BrowserRouter>\n    );\n  }\n}\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}